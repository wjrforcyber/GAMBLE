# GAMBLE
<p align="center">
   <picture>
     <img src="./resources/image/gamble.png" width="30%" alt="gamble logo">
   </picture>
</p>

> [!NOTE]
> This is an early stage and WIP case study of a course project related to maze route. So lots of problems/decisions are simplified. 

> [!WARNING]
If you are looking for a complete solution on GPU acceleration on maze route, recommend [GAMER: GPU-Accelerated Maze Routing](https://appsrv.cse.cuhk.edu.hk/~sjlin/GAMER%20TCAD2023.pdf).


## Proposed notes
The proposed method is trying to use partitioned square to boost the efficiency of maze route. The keynotes of proposed square extraction and section extraction is shown in the [slides](./slides/GAMBLE.pdf). There are lots of corner cases after partition, and not shown in the slides, if you are still interested at this point, feel free to drop me an email.

## Build
The current experiment is performed on NVIDIA GeForce RTX 3090.
You probably need to deal with `toolchain.cmake` first, I encode it with the CUDA toolset on our server. Then simply type
```bash
cmake -G Ninja -DCMAKE_BUILD_TYPE=Debug -B build -S . -DCMAKE_TOOLCHAIN_FILE=toolchain.cmake
cmake --build build
cd build
```
to build the whole project. To run all test cases, type
```bash
ctest --verbose --output-on-failure
```
For direct case test, eg.
```bash
cd build
./loadTestCases < ../cases/case13.txt
```

### Run bash for all 13 test cases
There's a bash script in the source,  if you run cmake it will be automatically copied to `build` directory. 
```bash
cd build
chmod +x run_test.sh
./run_test.sh
```
will run all the actually test cases in `cases` folder.


## Experiment

### Initial result
Since path tracking is still using simple L shape, costs need to be upgraded.

| Cases | CPU_time | CPU_cost | GPU_time | GPU_cost |
| --- | --- | --- | --- | --- |
| `case1.txt` | 5.18819s | 608800 | 0.056849s | 1316839 |
| `case2.txt` | 0.656369s | 193416 | 0.015809s | 524584 |
| `case3.txt` | 0.225975s | 135455 | 0.003767s | 234145 |
| `case4.txt` |  0.036228s | 66573 | 0.001604s | 152529 | 
| `case5.txt` | 0.014436s | 32296 | 0.000445s | 47849 |
| `case6.txt` | 0.005131s | 12972 | 0.000277s | 26309 |
| `case7.txt` | 6.83889s | 5022 | 0.047267s | 16020 |
| `case8.txt` | 0.755656s | 1969 | 0.013178s| 5379 |
| `case9.txt` | 0.372532s | 1550 | 0.004908s | 3681 |
| `case10.txt` | 0.084466s  | 1019 | 0.001682s | 2353 |
| `case11.txt` | 0.014622s | 289 | 0.000488s | 792 |
| `case12.txt` | 25.6223s | 13652 | 0.192873s | 120453 |
| `case13.txt` | 39.4877s | 17131 | 0.289555s | 172745 |


*PS: This table can be auto generated by [this script](./resources/generate_cost_table.sh) with the result log from `./run_test.sh`. Eg,

```bash
./generate_cost_table.sh ./build/test_results.log
```

## Contribute
You are welcome to contribute and create issues related to the problem. I'll try my best to give solution in my free time.